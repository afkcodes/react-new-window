!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],t):e.ReactNewWindow=t(e.React,e.ReactDOM)}(this,function(e,t){"use strict";function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function n(e,t){return e(t={exports:{}},t.exports),t.exports}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var r=o(n(function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0})),i=o(n(function(e){function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0})),s=n(function(e){function t(o,n){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(o,n)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0});o(s);var c=o(n(function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),u=n(function(e){function t(o){"@babel/helpers - typeof";return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(e.exports=t=function(e){return typeof e},e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.default=e.exports,e.exports.__esModule=!0),t(o)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0});o(u);var a=n(function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0});o(a);var f=o(n(function(e){var t=u.default;e.exports=function(e,o){if(o&&("object"===t(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.default=e.exports,e.exports.__esModule=!0})),l=o(n(function(e){function t(o){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,t(o)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),p=o(n(function(e){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},e.exports.default=e.exports,e.exports.__esModule=!0})),d="function"==typeof Symbol&&Symbol.for,y=d?Symbol.for("react.element"):60103,h=d?Symbol.for("react.portal"):60106,m=d?Symbol.for("react.fragment"):60107,w=d?Symbol.for("react.strict_mode"):60108,b=d?Symbol.for("react.profiler"):60114,x=d?Symbol.for("react.provider"):60109,v=d?Symbol.for("react.context"):60110,_=d?Symbol.for("react.async_mode"):60111,S=d?Symbol.for("react.concurrent_mode"):60111,O=d?Symbol.for("react.forward_ref"):60112,g=d?Symbol.for("react.suspense"):60113,C=d?Symbol.for("react.suspense_list"):60120,E=d?Symbol.for("react.memo"):60115,P=d?Symbol.for("react.lazy"):60116,j=d?Symbol.for("react.block"):60121,M=d?Symbol.for("react.fundamental"):60117,R=d?Symbol.for("react.responder"):60118,k=d?Symbol.for("react.scope"):60119;function T(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case y:switch(e=e.type){case _:case S:case m:case b:case w:case g:return e;default:switch(e=e&&e.$$typeof){case v:case O:case P:case E:case x:return e;default:return t}}case h:return t}}}function $(e){return T(e)===S}var F={AsyncMode:_,ConcurrentMode:S,ContextConsumer:v,ContextProvider:x,Element:y,ForwardRef:O,Fragment:m,Lazy:P,Memo:E,Portal:h,Profiler:b,StrictMode:w,Suspense:g,isAsyncMode:function(e){return $(e)||T(e)===_},isConcurrentMode:$,isContextConsumer:function(e){return T(e)===v},isContextProvider:function(e){return T(e)===x},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===y},isForwardRef:function(e){return T(e)===O},isFragment:function(e){return T(e)===m},isLazy:function(e){return T(e)===P},isMemo:function(e){return T(e)===E},isPortal:function(e){return T(e)===h},isProfiler:function(e){return T(e)===b},isStrictMode:function(e){return T(e)===w},isSuspense:function(e){return T(e)===g},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===m||e===S||e===b||e===w||e===g||e===C||"object"==typeof e&&null!==e&&(e.$$typeof===P||e.$$typeof===E||e.$$typeof===x||e.$$typeof===v||e.$$typeof===O||e.$$typeof===M||e.$$typeof===R||e.$$typeof===k||e.$$typeof===j)},typeOf:T},L=n(function(e,t){}),A=(L.AsyncMode,L.ConcurrentMode,L.ContextConsumer,L.ContextProvider,L.Element,L.ForwardRef,L.Fragment,L.Lazy,L.Memo,L.Portal,L.Profiler,L.StrictMode,L.Suspense,L.isAsyncMode,L.isConcurrentMode,L.isContextConsumer,L.isContextProvider,L.isElement,L.isForwardRef,L.isFragment,L.isLazy,L.isMemo,L.isPortal,L.isProfiler,L.isStrictMode,L.isSuspense,L.isValidElementType,L.typeOf,n(function(e){e.exports=F}),Object.getOwnPropertySymbols),I=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},o=0;o<10;o++)t["_"+String.fromCharCode(o)]=o;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}})()&&Object.assign;var W="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";Function.call.bind(Object.prototype.hasOwnProperty);function N(){}function B(){}B.resetWarningCache=N;var D=n(function(e){e.exports=function(){function e(e,t,o,n,r,i){if(i!==W){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var o={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:B,resetWarningCache:N};return o.PropTypes=o,o}()});function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var o,n=l(e);if(t){var r=l(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return f(this,o)}}var q=function(e){c(n,e);var o=H(n);function n(e){var t;return r(this,n),(t=o.call(this,e)).container=null,t.window=null,t.windowCheckerInterval=null,t.released=!1,t.state={mounted:!1},t}return i(n,[{key:"render",value:function(){return this.state.mounted?t.createPortal(this.props.children,this.container):null}},{key:"componentDidMount",value:function(){this.openChild(),this.setState({mounted:!0})}},{key:"openChild",value:function(){var e,t=this,o=this.props,n=o.url,r=o.title,i=o.name,s=o.features,c=o.onBlock,u=o.onOpen,a=o.center;if("string"!=typeof a||void 0!==s.width&&void 0!==s.height){if("parent"===a)s.left=window.top.outerWidth/2+window.top.screenX-s.width/2,s.top=window.top.outerHeight/2+window.top.screenY-s.height/2;else if("screen"===a){var f=void 0!==window.screenLeft?window.screenLeft:window.screen.left,l=void 0!==window.screenTop?window.screenTop:window.screen.top,p=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,d=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height;s.left=p/2-s.width/2+f,s.top=d/2-s.height/2+l}}else console.warn("width and height window features must be present when a center prop is provided");if(this.window=window.open(n,i,(e=s,Object.keys(e).reduce(function(t,o){var n=e[o];return"boolean"==typeof n?t.push("".concat(o,"=").concat(n?"yes":"no")):t.push("".concat(o,"=").concat(n)),t},[]).join(","))),this.container=this.window.document.createElement("div"),this.windowCheckerInterval=setInterval(function(){t.window&&!t.window.closed||t.release()},50),this.window){if(this.window.document.title=r,this.window.document.body.appendChild(this.container),this.props.copyStyles&&setTimeout(function(){return e=document,o=t.window.document,n=o.createDocumentFragment(),Array.from(e.styleSheets).forEach(function(e){var t;try{t=e.cssRules}catch(e){console.error(e)}if(t){var r=[];Array.from(e.cssRules).forEach(function(e){var t=e.type;if(t!==CSSRule.UNKNOWN_RULE){var o="";o=t===CSSRule.KEYFRAMES_RULE?function(e){var t=["@keyframes",e.name,"{"];return Array.from(e.cssRules).forEach(function(e){t.push(e.keyText,"{",e.style.cssText,"}")}),t.push("}"),t.join(" ")}(e):[CSSRule.IMPORT_RULE,CSSRule.FONT_FACE_RULE].includes(t)?function(e){return e.cssText.split("url(").map(function(e){return"/"===e[1]?"".concat(e.slice(0,1)).concat(window.location.origin).concat(e.slice(1)):e}).join("url(")}(e):e.cssText,r.push(o)}});var i=o.createElement("style");i.textContent=r.join("\n"),n.appendChild(i)}else if(e.href){var s=o.createElement("link");s.rel="stylesheet",s.href=e.href,n.appendChild(s)}}),void o.head.appendChild(n);var e,o,n},0),"function"==typeof u&&u(this.window),this.props.scripts){var y=this.window.document;this.props.scripts.forEach(function(e){!function(e,t){var o=e.createElement("script");o.type="text/javascript",t.src&&(o.src=t.src);t.code&&(o.text=t.code);e.head.appendChild(o)}(y,e)})}if(this.props.metas){var h=this.window.document;this.props.metas.forEach(function(e){!function(e,t){var o=e.createElement("meta");for(var n in t)t.hasOwnProperty(n)&&o.setAttribute(n,t[n]);e.head.appendChild(o)}(h,e)})}this.window.addEventListener("beforeunload",function(){return t.release()})}else"function"==typeof c?c(null):console.warn("A new window could not be opened. Maybe it was blocked.")}},{key:"componentWillUnmount",value:function(){this.window&&this.window.close()}},{key:"release",value:function(){if(!this.released){this.released=!0,clearInterval(this.windowCheckerInterval);var e=this.props.onUnload;"function"==typeof e&&e(null)}}}]),n}(e.PureComponent);return p(q,"defaultProps",{url:"",name:"",title:"",features:{width:"600px",height:"640px"},onBlock:null,onOpen:null,onUnload:null,center:"parent",copyStyles:!0}),q.propTypes={children:D.node,url:D.string,name:D.string,title:D.string,features:D.object,onUnload:D.func,onBlock:D.func,onOpen:D.func,center:D.oneOf(["parent","screen"]),copyStyles:D.bool,scripts:D.array,metas:D.array},q});
//# sourceMappingURL=react-new-window.js.map
